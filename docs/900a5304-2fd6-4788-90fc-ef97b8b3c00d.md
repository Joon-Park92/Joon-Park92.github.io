---
publish: true
id: TSK-250530-154132
uuid: 900a5304-2fd6-4788-90fc-ef97b8b3c00d
created: 2025-05-30
---

Ansibleì—ì„œ `inventory`, `playbooks`, `roles`ë¥¼ í¬í•¨í•œ ë””ë ‰í† ë¦¬ êµ¬ì¡°ëŠ” **ê°€ë…ì„±ê³¼ ì¬ì‚¬ìš©ì„±**, **ìœ ì§€ë³´ìˆ˜ ìš©ì´ì„±**, **í™˜ê²½ ë¶„ë¦¬**, **ì—­í•  ëª…í™•í™”** ë“±ì„ ìœ„í•´ í‘œì¤€ì ì¸ êµ¬ì¡°ë¡œ êµ¬ì„±í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. ì•„ë˜ì— ì‹¤ë¬´ì—ì„œ ê°€ì¥ ë„ë¦¬ ì“°ì´ëŠ” ë””ë ‰í† ë¦¬ êµ¬ì¡° ì˜ˆì‹œì™€ ê° êµ¬ì„±ìš”ì†Œì˜ ì—­í• ì„ ì„¤ëª…ë“œë¦´ê²Œìš”.

---

## ğŸ“ Best Practice ë””ë ‰í† ë¦¬ êµ¬ì¡°

~~~
ansible-project/
â”œâ”€â”€ inventories/
â”‚   â”œâ”€â”€ production/
â”‚   â”‚   â”œâ”€â”€ hosts.yml
â”‚   â”‚   â””â”€â”€ group_vars/
â”‚   â”‚       â”œâ”€â”€ all.yml
â”‚   â”‚       â”œâ”€â”€ web.yml
â”‚   â”‚       â””â”€â”€ db.yml
â”‚   â””â”€â”€ staging/
â”‚       â”œâ”€â”€ hosts.yml
â”‚       â””â”€â”€ group_vars/
â”œâ”€â”€ playbooks/
â”‚   â”œâ”€â”€ site.yml
â”‚   â”œâ”€â”€ web.yml
â”‚   â”œâ”€â”€ db.yml
â”‚   â””â”€â”€ k3s-cluster.yml
â”œâ”€â”€ roles/
â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”œâ”€â”€ tasks/
â”‚   â”‚   â””â”€â”€ templates/
â”‚   â”œâ”€â”€ k3s/
â”‚   â”œâ”€â”€ helm/
â”‚   â”œâ”€â”€ argocd/
â”‚   â””â”€â”€ app/
â”œâ”€â”€ files/
â”‚   â””â”€â”€ custom-configs/
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ nginx.conf.j2
â”œâ”€â”€ group_vars/
â”‚   â””â”€â”€ all.yml
â”œâ”€â”€ ansible.cfg
â””â”€â”€ requirements.yml
~~~

---

## ğŸ§© ê° êµ¬ì„±ìš”ì†Œ ì„¤ëª…

### 1. `inventories/`

- **í™˜ê²½ë³„ ì¸ë²¤í† ë¦¬ ì •ì˜** (ì˜ˆ: production, staging)

- ê° í™˜ê²½ë³„ `hosts.yml` + `group_vars/` êµ¬ì¡°ë¡œ ë‚˜ëˆ  ìœ ì§€ë³´ìˆ˜ ìš©ì´

- ğŸ”‘ SSH ì •ë³´, ë³€ìˆ˜ ì„¤ì •, í˜¸ìŠ¤íŠ¸ ê·¸ë£¹í™” ë“±ì„ ì„¤ì •

~~~bash
ansible-playbook -i inventories/production/hosts.yml playbooks/site.yml
~~~

---

### 2. `playbooks/`

- ì‹¤ì œ ì‹¤í–‰ë  í”Œë ˆì´ë¶ YAML íŒŒì¼ ìœ„ì¹˜

- ë³´í†µ ì—­í• (role)ì„ ë¬¶ëŠ” ìƒìœ„ ë‹¨ìœ„ì˜ orchestration ì—­í•  ìˆ˜í–‰

- ì˜ˆ: `web.yml`, `k3s-cluster.yml`, `deploy-app.yml`

~~~yaml
- name: Web setup
  hosts: web
  roles:
    - common
    - nginx
~~~

---

### 3. `roles/`

- **Ansibleì˜ í•µì‹¬ ì¬ì‚¬ìš© ë‹¨ìœ„**

- ê° ì—­í• (role)ì€ ë…ë¦½ì ì¸ ê¸°ëŠ¥ ë‹¨ìœ„ (ì˜ˆ: `k3s`, `helm`, `argocd`)

- í•˜ìœ„ ë””ë ‰í† ë¦¬ë¡œ ë¶„ë¦¬:

~~~
roles/helm/
â”œâ”€â”€ tasks/main.yml
â”œâ”€â”€ defaults/main.yml
â”œâ”€â”€ files/
â”œâ”€â”€ templates/
â”œâ”€â”€ handlers/main.yml
â””â”€â”€ vars/main.yml
~~~

- ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œë„ ì¬ì‚¬ìš© ê°€ëŠ¥

---

### 4. `group_vars/`, `host_vars/`

- **ê·¸ë£¹ ë˜ëŠ” ê°œë³„ í˜¸ìŠ¤íŠ¸ ë‹¨ìœ„ ë³€ìˆ˜ ì„¤ì •**

- `group_vars/all.yml`: ëª¨ë“  í™˜ê²½ì— ê³µí†µ ì ìš©ë˜ëŠ” ë³€ìˆ˜

ì˜ˆ: `group_vars/web.yml`

~~~yaml
nginx_port: 80
~~~

---

### 5. `files/`, `templates/`

- `files/`: ê·¸ëŒ€ë¡œ ë³µì‚¬í•  íŒŒì¼ë“¤

- `templates/`: Jinja2 ë¬¸ë²• ì‚¬ìš©í•˜ì—¬ ë³€ìˆ˜ë¥¼ ë™ì ìœ¼ë¡œ ë„£ì„ ìˆ˜ ìˆëŠ” í…œí”Œë¦¿

---

### 6. `ansible.cfg`

- Ansible ì‹¤í–‰ì— ëŒ€í•œ ì„¤ì •ì„ ì •ì˜

- ì˜ˆ: ê¸°ë³¸ inventory, ssh args, roles_path ë“±

~~~ini
[defaults]
inventory = inventories/production/hosts.yml
roles_path = roles
~~~

---

## âœ… ìš´ì˜ ê¸°ì¤€ ìš”ì•½

|ë””ë ‰í† ë¦¬|ëª©ì |
|---|---|
|`inventories/`|í™˜ê²½ë³„ ì¸ë²¤í† ë¦¬ ë° ë³€ìˆ˜ ê´€ë¦¬|
|`playbooks/`|ì‹¤í–‰ ë‹¨ìœ„ ë¬¶ìŒ (í˜¸ì¶œì )|
|`roles/`|ê¸°ëŠ¥ ë‹¨ìœ„ ì¬ì‚¬ìš© ëª¨ë“ˆ|
|`group_vars/`|ê·¸ë£¹ë³„ ë³€ìˆ˜|
|`host_vars/`|í˜¸ìŠ¤íŠ¸ë³„ ë³€ìˆ˜|
|`files/`|ì •ì  íŒŒì¼ ë°°í¬|
|`templates/`|Jinja2 ê¸°ë°˜ í…œí”Œë¦¿|
|`ansible.cfg`|ê¸°ë³¸ ë™ì‘ ì„¤ì •|

---

## ğŸ§  TIP

- ë¡œì»¬ì—ì„œ ê´€ë¦¬í•˜ë‹¤ê°€ **í´ë¼ìš°ë“œë¡œ í™•ì¥**í•  ê³„íšì´ë¼ë©´ ì´ êµ¬ì¡°ëŠ” ê·¸ëŒ€ë¡œ í™•ì¥ ê°€ëŠ¥

- ì—­í• ë§Œ ì¶”ê°€í•˜ê³ , `inventory`ë§Œ í´ë¼ìš°ë“œì— ë§ê²Œ ëŠ˜ë¦¬ë©´ ë¨
